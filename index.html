<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Liga de Enfrentamientos Completa</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
h1, h2, h3 { text-align: center; }
.jornada { margin-bottom: 30px; }
.tablas-jornada { display: flex; justify-content: space-between; gap: 20px; flex-wrap: wrap; }
table { border-collapse: collapse; width: 48%; }
th, td { border: 1px solid #ddd; padding: 6px; text-align: center; }
th { background: #eee; }
</style>
</head>
<body>
<h1>Liga de Enfrentamientos - Resultados</h1>

<div id="todas-jornadas"></div>
<div id="clasificacion-general"></div>

<script>
// Función que calcula los puntos de una tabla de goles
function calcularPuntosTabla(tablaGoles, tablaPuntos) {
  for (let i = 0; i < tablaGoles.tBodies[0].rows.length; i++) {
    const rowGoles = tablaGoles.tBodies[0].rows[i];
    const rowPuntos = tablaPuntos.tBodies[0].rows[i];
    const goles1 = parseInt(rowGoles.cells[1].innerText);
    const goles2 = parseInt(rowGoles.cells[3].innerText);
    if (goles1 > goles2) {
      rowPuntos.cells[1].innerText = 3;
      rowPuntos.cells[3].innerText = 0;
    } else if (goles2 > goles1) {
      rowPuntos.cells[1].innerText = 0;
      rowPuntos.cells[3].innerText = 3;
    } else {
      rowPuntos.cells[1].innerText = 1;
      rowPuntos.cells[3].innerText = 1;
    }
  }
}

// Crear una jornada
function crearJornada(num, enfrentamientos) {
  const divJornada = document.createElement('div');
  divJornada.className = 'jornada';
  const h3 = document.createElement('h3');
  h3.innerText = `Jornada ${num}`;
  divJornada.appendChild(h3);

  const contenedorTablas = document.createElement('div');
  contenedorTablas.className = 'tablas-jornada';

  // Tabla de goles
  const tableGoles = document.createElement('table');
  tableGoles.id = `goles-${num}`;
  let thead = tableGoles.createTHead();
  thead.innerHTML = "<tr><th>Jugador 1</th><th>Mister</th><th>Jugador 2</th><th>Mister</th></tr>";
  let tbody = tableGoles.createTBody();
  enfrentamientos.forEach(e => {
    let row = tbody.insertRow();
    row.insertCell().innerText = e[0];
    row.insertCell().innerText = e[2];
    row.insertCell().innerText = e[1];
    row.insertCell().innerText = e[3];
  });
  contenedorTablas.appendChild(tableGoles);

  // Tabla de puntos
  const tablePuntos = document.createElement('table');
  tablePuntos.id = `puntos-${num}`;
  let theadP = tablePuntos.createTHead();
  theadP.innerHTML = "<tr><th>Jugador 1</th><th>Puntos</th><th>Jugador 2</th><th>Puntos</th></tr>";
  let tbodyP = tablePuntos.createTBody();
  enfrentamientos.forEach(e => {
    let row = tbodyP.insertRow();
    row.insertCell().innerText = e[0];
    row.insertCell().innerText = "";
    row.insertCell().innerText = e[1];
    row.insertCell().innerText = "";
  });
  contenedorTablas.appendChild(tablePuntos);

  divJornada.appendChild(contenedorTablas);

  // Calcular puntos automáticamente
  calcularPuntosTabla(tableGoles, tablePuntos);

  document.getElementById("todas-jornadas").appendChild(divJornada);
}

// Calcular clasificación general
function clasificacionGeneral() {
  const jugadores = {};
  for (let j = 1; j <= 11; j++) {
    const tabla = document.getElementById(`puntos-${j}`);
    if (!tabla) continue;
    const cuerpo = tabla.tBodies[0]; // Solo tbody
    for (let i = 0; i < cuerpo.rows.length; i++) {
      const row = cuerpo.rows[i];
      const j1 = row.cells[0].innerText;
      const p1 = parseInt(row.cells[1].innerText);
      const j2 = row.cells[2].innerText;
      const p2 = parseInt(row.cells[3].innerText);
      jugadores[j1] = (jugadores[j1] || 0) + p1;
      jugadores[j2] = (jugadores[j2] || 0) + p2;
    }
  }

  const tablaClas = Object.entries(jugadores).sort((a,b) => b[1]-a[1]);
  const div = document.getElementById("clasificacion-general");
  div.innerHTML = "<h2>Clasificación General</h2>";
  const table = document.createElement('table');
  let thead = table.createTHead();
  thead.innerHTML = "<tr><th>Jugador</th><th>Puntos</th></tr>";
  let tbody = table.createTBody();
  tablaClas.forEach(j => {
    let row = tbody.insertRow();
    row.insertCell().innerText = j[0];
    row.insertCell().innerText = j[1];
  });
  div.appendChild(table);
}

// Todas las jornadas con goles inventados
const todasJornadas = [
  [["Carmelo","Fopi",2,1],["Juan","Óscar",0,0],["Joroje","Alex",1,3],["Jorge","Marcos",4,2],["Isma","Diego",2,2],["Víctor","Josemi",1,0]],
  [["Carmelo","Juan",1,1],["Fopi","Óscar",0,2],["Joroje","Jorge",3,2],["Alex","Marcos",0,0],["Isma","Víctor",2,1],["Diego","Josemi",2,3]],
  [["Carmelo","Joroje",2,1],["Juan","Alex",1,2],["Fopi","Jorge",0,3],["Óscar","Marcos",2,2],["Isma","Josemi",1,1],["Víctor","Diego",3,0]],
  [["Carmelo","Jorge",1,0],["Joroje","Marcos",2,2],["Juan","Isma",0,1],["Alex","Diego",3,0],["Fopi","Víctor",2,1],["Óscar","Josemi",1,1]],
  [["Carmelo","Isma",3,0],["Jorge","Diego",2,2],["Joroje","Víctor",1,2],["Marcos","Josemi",0,0],["Juan","Fopi",2,1],["Alex","Óscar",1,3]],
  [["Carmelo","Víctor",1,1],["Isma","Josemi",0,2],["Jorge","Óscar",3,1],["Diego","Fopi",1,0],["Joroje","Juan",2,2],["Marcos","Alex",0,1]],
  [["Carmelo","Josemi",2,0],["Víctor","Alex",1,3],["Isma","Marcos",2,2],["Jorge","Fopi",0,1],["Diego","Joroje",1,2],["Óscar","Juan",3,1]],
  [["Carmelo","Óscar",2,2],["Josemi","Fopi",1,0],["Víctor","Marcos",3,0],["Isma","Alex",0,1],["Jorge","Juan",1,1],["Diego","Joroje",2,2]],
  [["Carmelo","Marcos",1,0],["Óscar","Alex",2,3],["Josemi","Juan",0,0],["Víctor","Joroje",1,2],["Isma","Jorge",2,2],["Fopi","Diego",1,0]],
  [["Carmelo","Alex",3,1],["Marcos","Juan",0,2],["Óscar","Joroje",1,1],["Josemi","Jorge",0,2],["Víctor","Fopi",2,0],["Isma","Diego",1,1]],
  [["Carmelo","Diego",2,2],["Alex","Josemi",1,0],["Marcos","Fopi",0,3],["Joroje","Isma",2,1],["Óscar","Víctor",0,1],["Juan","Jorge",1,1]]
];

// Crear todas las jornadas y calcular puntos
todasJornadas.forEach((jornada, idx) => crearJornada(idx+1, jornada));
clasificacionGeneral();
</script>
</body>
</html>
