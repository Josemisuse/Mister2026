<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Liga de Enfrentamientos Completa</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
h1, h2, h3 { text-align: center; }
.jornada { margin-bottom: 30px; }
.tablas-jornada { display: flex; justify-content: space-between; gap: 20px; flex-wrap: wrap; }
table { border-collapse: collapse; width: 48%; }
th, td { border: 1px solid #ddd; padding: 6px; text-align: center; }
th { background: #eee; }
</style>
</head>
<body>
<h1>Liga de Enfrentamientos - Resultados</h1>

<div id="todas-jornadas"></div>
<div id="clasificacion-general"></div>

<script>
// Función que calcula los puntos de una tabla de goles
function calcularPuntosTabla(tablaGoles, tablaPuntos) {
  for (let i = 0; i < tablaGoles.tBodies[0].rows.length; i++) {
    const rowGoles = tablaGoles.tBodies[0].rows[i];
    const rowPuntos = tablaPuntos.tBodies[0].rows[i];
    const goles1 = parseInt(rowGoles.cells[1].innerText);
    const goles2 = parseInt(rowGoles.cells[3].innerText);
    if (goles1 > goles2) {
      rowPuntos.cells[1].innerText = 3;
      rowPuntos.cells[3].innerText = 0;
    } else if (goles2 > goles1) {
      rowPuntos.cells[1].innerText = 0;
      rowPuntos.cells[3].innerText = 3;
	} else if (goles1 === 0 && goles2 === 0) {  // empate 0-0
    rowPuntos.cells[1].innerText = 0;
    rowPuntos.cells[3].innerText = 0;
    } else {
      rowPuntos.cells[1].innerText = 1;
      rowPuntos.cells[3].innerText = 1;
    }
  }
}

// Crear una jornada
function crearJornada(num, enfrentamientos) {
  const divJornada = document.createElement('div');
  divJornada.className = 'jornada';
  const h3 = document.createElement('h3');
  h3.innerText = `Jornada ${num}`;
  divJornada.appendChild(h3);

  const contenedorTablas = document.createElement('div');
  contenedorTablas.className = 'tablas-jornada';

  // Tabla de goles
  const tableGoles = document.createElement('table');
  tableGoles.id = `goles-${num}`;
  let thead = tableGoles.createTHead();
  thead.innerHTML = "<tr><th>Jugador 1</th><th>Mister</th><th>Jugador 2</th><th>Mister</th></tr>";
  let tbody = tableGoles.createTBody();
  enfrentamientos.forEach(e => {
    let row = tbody.insertRow();
    row.insertCell().innerText = e[0];
    row.insertCell().innerText = e[2];
    row.insertCell().innerText = e[1];
    row.insertCell().innerText = e[3];
  });
  contenedorTablas.appendChild(tableGoles);

  // Tabla de puntos
  const tablePuntos = document.createElement('table');
  tablePuntos.id = `puntos-${num}`;
  let theadP = tablePuntos.createTHead();
  theadP.innerHTML = "<tr><th>Jugador 1</th><th>Puntos</th><th>Jugador 2</th><th>Puntos</th></tr>";
  let tbodyP = tablePuntos.createTBody();
  enfrentamientos.forEach(e => {
    let row = tbodyP.insertRow();
    row.insertCell().innerText = e[0];
    row.insertCell().innerText = "";
    row.insertCell().innerText = e[1];
    row.insertCell().innerText = "";
  });
  contenedorTablas.appendChild(tablePuntos);

  divJornada.appendChild(contenedorTablas);

  // Calcular puntos automáticamente
  calcularPuntosTabla(tableGoles, tablePuntos);

  document.getElementById("todas-jornadas").appendChild(divJornada);
}

// Calcular clasificación general
function clasificacionGeneral() {
  const jugadores = {};
  for (let j = 1; j <= 11; j++) {
    const tabla = document.getElementById(`puntos-${j}`);
    if (!tabla) continue;
    const cuerpo = tabla.tBodies[0]; // Solo tbody
    for (let i = 0; i < cuerpo.rows.length; i++) {
      const row = cuerpo.rows[i];
      const j1 = row.cells[0].innerText;
      const p1 = parseInt(row.cells[1].innerText);
      const j2 = row.cells[2].innerText;
      const p2 = parseInt(row.cells[3].innerText);
      jugadores[j1] = (jugadores[j1] || 0) + p1;
      jugadores[j2] = (jugadores[j2] || 0) + p2;
    }
  }

  const tablaClas = Object.entries(jugadores).sort((a,b) => b[1]-a[1]);
  const div = document.getElementById("clasificacion-general");
  div.innerHTML = "<h2>Clasificación General</h2>";
  const table = document.createElement('table');
  let thead = table.createTHead();
  thead.innerHTML = "<tr><th>Jugador</th><th>Puntos</th></tr>";
  let tbody = table.createTBody();
  tablaClas.forEach(j => {
    let row = tbody.insertRow();
    row.insertCell().innerText = j[0];
    row.insertCell().innerText = j[1];
  });
  div.appendChild(table);
}

// Todas las jornadas con goles inventados
const todasJornadas = [
  [["Carmelo","Fopi",12,28],["Juan","Óscar",27,24],["Joroje","Alex",19,27],["Jorge","Marcos",27,36],["Isma","Diego",39,50],["Víctor","Josemi",19,31]],
  [["Carmelo","Juan",53,50],["Fopi","Óscar",24,63],["Joroje","Jorge",37,34],["Alex","Marcos",38,48],["Isma","Víctor",61,32],["Diego","Josemi",40,44]],
  [["Carmelo","Joroje",36,21],["Juan","Alex",50,46],["Fopi","Jorge",38,21],["Óscar","Marcos",39,33],["Isma","Josemi",27,35],["Víctor","Diego",26,47]],
  [["Carmelo","Jorge",36,40],["Joroje","Marcos",16,33],["Juan","Isma",34,38],["Alex","Diego",86,26],["Fopi","Víctor",52,45],["Óscar","Josemi",25,44]],
  [["Carmelo","Isma",0,0],["Jorge","Diego",0,0],["Joroje","Víctor",0,0],["Marcos","Josemi",0,0],["Juan","Fopi",0,0],["Alex","Óscar",0,0]],
  [["Carmelo","Víctor",0,0],["Isma","Josemi",0,0],["Jorge","Óscar",0,0],["Diego","Fopi",0,0],["Joroje","Juan",0,0],["Marcos","Alex",0,0]],
  [["Carmelo","Josemi",0,0],["Víctor","Alex",0,0],["Isma","Marcos",0,0],["Jorge","Fopi",0,0],["Diego","Joroje",0,0],["Óscar","Juan",0,0]],
  [["Carmelo","Óscar",0,0],["Josemi","Fopi",0,0],["Víctor","Marcos",0,0],["Isma","Alex",0,0],["Jorge","Juan",0,0],["Diego","Joroje",0,0]],
  [["Carmelo","Marcos",0,0],["Óscar","Alex",0,0],["Josemi","Juan",0,0],["Víctor","Joroje",0,0],["Isma","Jorge",0,0],["Fopi","Diego",0,0]],
  [["Carmelo","Alex",0,0],["Marcos","Juan",0,0],["Óscar","Joroje",0,0],["Josemi","Jorge",0,0],["Víctor","Fopi",0,0],["Isma","Diego",0,0]],
  [["Carmelo","Diego",0,0],["Alex","Josemi",0,0],["Marcos","Fopi",0,0],["Joroje","Isma",0,0],["Óscar","Víctor",0,0],["Juan","Jorge",0,0]]
];

// Crear todas las jornadas y calcular puntos
todasJornadas.forEach((jornada, idx) => crearJornada(idx+1, jornada));
clasificacionGeneral();
</script>
</body>
</html>
